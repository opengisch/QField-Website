{{ define "main" }}

{{ $content := .Site.Data.hardware.content }}
{{ $certified := .Site.Data.hardware.certified }}

<script
  type="module"
  src="https://cdn.jsdelivr.net/gh/zerodevx/zero-md@2/dist/zero-md.min.js"
></script>

<!-- Section #1: Header -->
<section class="pt-5 pb-1 text-center" aria-labelledby="hero-heading">
  <div class="container">
    <div class="d-flex justify-content-center gap-3 mb-4">
      {{ partial "asset-image.html" (dict 
        "src" "images/logo_certified_qf.png"
        "alt" "QField Certified Logo"
        "class" "hardware-logo"
        "style" "width: auto; height: 50px;"
      ) }}
      {{ partial "asset-image.html" (dict 
        "src" "images/logo_work-with.png"
        "alt" "Works with QField Logo"
        "class" "hardware-logo"
        "style" "width: auto; height: 50px;"
      ) }}
    </div>
    <h1 id="hero-heading" class="display-4 mb-1">{{ $content.title }}</h1>
  </div>
</section>

<!-- Section #2: Introduction -->
<section class="section-spacing">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <p>{{ $content.intro.description }}</p>
        <p>{{ $content.intro.details | markdownify }}</p>
      </div>
    </div>

    <div class="row">
      <div class="col-12 text-center mb-4">
        <a
          href="{{ $content.intro.cta.url }}"
          class="btn btn-primary btn-lg"
          target="_blank"
          rel="noopener"
        >{{ $content.intro.cta.text }}</a>
      </div>
    </div>

    <!-- Tab navigation -->
    <div class="row">
      <div class="col-12">
        <ul class="nav nav-tabs mb-4" id="hardwareTabs" role="tablist">
          {{ range $index, $tab := $content.tabs }}
            <li class="nav-item" role="presentation">
              <button
                class="nav-link{{ if eq $index 0 }} active{{ end }}"
                id="{{ $tab.id }}-tab"
                data-bs-toggle="tab"
                data-bs-target="#{{ $tab.id }}-pane"
                type="button"
                role="tab"
                aria-controls="{{ $tab.id }}-pane"
                aria-selected="{{ if eq $index 0 }}true{{ else }}false{{ end }}"
              >
                {{ $tab.title }}
              </button>
            </li>
          {{ end }}
        </ul>

        <!-- Tab content -->
        <div class="tab-content" id="hardwareTabsContent">
          <!-- Certified Devices Tab -->
          <div
            class="tab-pane fade show active"
            id="certified-pane"
            role="tabpanel"
            aria-labelledby="certified-tab"
            tabindex="0"
          >
            {{ with (index $content.tabs 0).note }}
              <p class="mb-4">{{ . | markdownify }}</p>
            {{ end }}

            {{ range $certified }}
              {{ partial "hardware/device-card.html" . }}
            {{ end }}
          </div>

          <!-- Works with QField Tab -->
          <div
            class="tab-pane fade"
            id="works-with-pane"
            role="tabpanel"
            aria-labelledby="works-with-tab"
            tabindex="0"
          >
                      <p>
              By using the <em>Buy now</em> referral links provided below,
              you are directly supporting the development of QField. Your
              contribution helps us to continue improving and expanding this
              project.
            </p>
            <zero-md src="/works-with-hardware.md" no-shadow>
              <template>
                <style>
                  :host {
                    display: block;
                  }
                  table {
                    width: 100%;
                    border-collapse: collapse;
                    margin: 1rem 0;
                  }
                  th, td {
                    border: 1px solid #dee2e6;
                    padding: 0.75rem;
                    text-align: left;
                  }
                  th {
                    background-color: #f8f9fa;
                    font-weight: 600;
                  }
                  a {
                    color: var(--bs-primary);
                    text-decoration: none;
                  }
                  a:hover {
                    text-decoration: underline;
                  }
                </style>
              </template>
            </zero-md>
            <p>
              x: Supported&nbsp;&nbsp;-: Not supported&nbsp;&nbsp;?: Unknown
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{{ end }}