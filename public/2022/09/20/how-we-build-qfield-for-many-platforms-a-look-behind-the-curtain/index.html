<!doctype html>
<html lang="en" data-bs-theme="light"> 
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<meta http-equiv='Content-Security-Policy' content="script-src 'self' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://use.typekit.net https://p.typekit.net https://cdn.jsdelivr.net; font-src 'self' data: https://use.typekit.net https://p.typekit.net; object-src 'none'; base-uri 'none'">

    <link rel="stylesheet" href="/css/bootstrap.min.3c8f27e6009ccfd710a905e6dcf12d0ee3c6f2ac7da05b0572d3e0d12e736fc8.css" integrity="sha256-PI8n5gCcz9cQqQXm3PEtDuPG8qx9oFsFctPg0S5zb8g=" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.362a2e2ca17ca45fa35e861ed0ba775e6d3126392fb65163d4f302f43c7beba8.css" integrity="sha256-NiouLKF8pF&#43;jXoYe0Lp3Xm0xJjkvtlFj1PMC9Dx766g=" crossorigin="anonymous"><link rel="stylesheet" href="/css/styles.10d40eeeb4f1690e0e699e3d1fb14cd71b8060821583d357eca1b0beeef93db5.css" integrity="sha256-ENQO7rTxaQ4OaZ49H7FM1xuAYIIVg9NX7KGwvu75PbU=" crossorigin="anonymous">

<link rel="stylesheet" href="/vendor/fontawesome/css/all.min.css">
<link rel="stylesheet" href="https://use.typekit.net/cbd7kad.css"><link rel="stylesheet" href="/bootstrap-icons/bootstrap-icons.004322721c8557331759bc6ddaacbb689b0f0715d688aec82bd056d2d5b5cc3b.css" integrity="sha256-AEMichyFVzMXWbxt2qy7aJsPBxXWiK7IK9BW0tW1zDs=" crossorigin="anonymous">

    <title>How we build QField for many platforms - A look behind the curtain</title>

<meta name="description" content="In the past year, the build system behind QField has been ported to vcpkg, a modern C&#43;&#43; dependency management system. It has been a great success for QField and considerably helped to streamline efforts, improve the development experience and to guarantee an outstanding stability of the application. In this blog post we will look at the history of building QGIS based applications for mobile systems and how it has become what it is today.
">
  


<link rel="canonical" href="http://localhost:1313/2022/09/20/how-we-build-qfield-for-many-platforms-a-look-behind-the-curtain/">


<link rel="alternate" hreflang="en" href="http://localhost:1313/2022/09/20/how-we-build-qfield-for-many-platforms-a-look-behind-the-curtain/">



<link rel="alternate" hreflang="x-default" href="http://localhost:1313/2022/09/20/how-we-build-qfield-for-many-platforms-a-look-behind-the-curtain/">












<meta property="og:title" content="How we build QField for many platforms - A look behind the curtain">
<meta property="og:description" content="In the past year, the build system behind QField has been ported to vcpkg, a modern C&#43;&#43; dependency management system. It has been a great success for QField and considerably helped to streamline efforts, improve the development experience and to guarantee an outstanding stability of the application. In this blog post we will look at the history of building QGIS based applications for mobile systems and how it has become what it is today.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://localhost:1313/2022/09/20/how-we-build-qfield-for-many-platforms-a-look-behind-the-curtain/">
  <meta property="article:section" content="blog">
  
    <meta property="article:published_time" content="2022-09-20T05:48:00+00:00">
  
  
    <meta property="article:modified_time" content="2022-09-20T05:48:00+00:00">
  
  <meta property="og:site_name" content="QField - Efficient field work built for QGIS">










<meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="How we build QField for many platforms - A look behind the curtain">
<meta name="twitter:description" content="In the past year, the build system behind QField has been ported to vcpkg, a modern C&#43;&#43; dependency management system. It has been a great success for QField and considerably helped to streamline efforts, improve the development experience and to guarantee an outstanding stability of the application. In this blog post we will look at the history of building QGIS based applications for mobile systems and how it has become what it is today.">






  





<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "How we build QField for many platforms - A look behind the curtain",
  "datePublished": "2022-09-20T05:48:00+00:00",
  "dateModified": "2022-09-20T05:48:00+00:00",
  "mainEntityOfPage": "http://localhost:1313/",
  "publisher": {
    "@type": "Organization",
    "name": "QField - Efficient field work built for QGIS"
  },
  "wordcount" :  863 ,
  "description": "In the past year, the build system behind QField has been ported to vcpkg, a modern C++ dependency management system. It has been a great success for QField and considerably helped to streamline efforts, improve the development experience and to guarantee an outstanding stability of the application. In this blog post we will look at the history of building QGIS based applications for mobile systems and how it has become what it is today.\n",
  "keywords":  null 
}
</script>












    


</head>

<body class="blog single d-flex flex-column min-vh-100"><header class="main-header">
  <nav id="navbar" class="navbar navbar-default navbar-light navbar-expand-lg bg-white border-bottom sticky-top">
    <div class="container">

      <a class="navbar-brand fw-bold" href="/">
        
          <img src="/images/qfield_for_qgis.png" alt="QField logo" height="70" class="navbar-brand__logo">
        
        
      </a>

      <div class="d-flex align-items-center gap-2 order-lg-3">
        <button class="navbar-toggler navbar-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#navMain" aria-controls="navMain" aria-expanded="false" aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse order-lg-2" id="navMain">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
                <a class="nav-link fw-semibold" href="/#highlights" target="_self">
                  
                  <span>Highlights</span>
                </a>
              </li>
            <li class="nav-item">
                <a class="nav-link fw-semibold" href="/assistance/" target="_self">
                  
                  <span>Get Assistance</span>
                </a>
              </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" id="nav-dropdown-resources" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Resources
                </a>
                <ul class="dropdown-menu" aria-labelledby="nav-dropdown-resources">
                  <li>
                      <a class="dropdown-item" href="/success-stories/" target="_self">
                        Success Stories
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="https://community.qfield.org/" target="_blank" rel="noopener noreferrer">
                        Community
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="https://docs.qfield.org" target="_blank" rel="noopener noreferrer">
                        Documentation
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="https://docs.qfield.org/get-started/contribute/" target="_blank" rel="noopener noreferrer">
                        Contribute
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="https://github.com/opengisch/qfield" target="_blank" rel="noopener noreferrer">
                        Source Code
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="/partner/" target="_self">
                        Partner Programs
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="/sdgs/" target="_self">
                        Sustainable Development Goals
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="/blog/" target="_self">
                        Blog
                      </a>
                    </li>
                  <li>
                      <a class="dropdown-item" href="https://www.opengis.ch/newsletter" target="_blank" rel="noopener noreferrer">
                        Newsletter
                      </a>
                    </li>
                  </ul>
              </li>
            <li class="nav-item">
                <a class="nav-link fw-semibold" href="https://opengis.ch/#contact" target="_blank" rel="noopener noreferrer">
                  
                  <span>Contact Us</span>
                </a>
              </li>
            <li class="nav-item">
                <a class="nav-link fw-semibold nav-link--button nav-link--primary" href="https://docs.qfield.org/get-started/" target="_blank" rel="noopener noreferrer">
                  <i class="fa-solid fa-rocket" aria-hidden="true"></i>
                  <span>Get started</span>
                </a>
              </li>
            <li class="nav-item">
                <a class="nav-link fw-semibold nav-link--button nav-link--support" href="/support-us/" target="_self">
                  <i class="fa-solid fa-heart" aria-hidden="true"></i>
                  <span>Support us</span>
                </a>
              </li>
            </ul>
      </div>
    </div>
  </nav>
</header>
<div id="content">


<section class="py-2">
  <div class="container">
    
    
    <div class="my-4">
      <a href="/blog/" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-arrow-left me-2"></i>Back to Blog
      </a>
    </div>

    
    <header class="mb-2">
      <h1 class="display-5 fw-bold mb-3">How we build QField for many platforms - A look behind the curtain</h1>
      
      <div class="text-muted mb-1">
        <i class="fas fa-calendar me-1"></i>
        <span class="me-3">September 20, 2022</span>
        
        <i class="fas fa-user me-1"></i>
        <span class="me-3">mkuhn</span>
        
        
        <i class="fas fa-clock me-1"></i>
        <span>5 min read</span>
        
      </div>
      <hr>
    </header>

    
    
    
    
    
    
  </div>
</section>


<article class="py-1 blog-single">
  <div class="container">
    <div class="row justify-content-center">
        <div class="content blog-content">
          <p><em>In the past year, <strong>the build system behind QField has been ported to <a href="https://vcpkg.io/en/index.html" target="_blank" rel="noopener">vcpkg, a modern C++ dependency management system</a></strong>. It has been a great success for QField and considerably helped to streamline efforts, improve the development experience and to guarantee an outstanding stability of the application. In this blog post we will look at the history of building QGIS based applications for mobile systems and how it has become what it is today.</em></p>
<p>When <a href="/2011/08/24/gsoc-2011-final-report/">Marco Bernasocchi (CEO of OPENGIS.ch and chair of QGIS.org) started working on <strong>QGIS for Android</strong> in Google Summer of Code</a> a decade ago, the main job was to also build all QGIS dependencies for Android. This includes well-known libraries like <strong>proj</strong> and <strong>gdal</strong> and less-known ones like libxml2 or iconv. Each of them has its particularities and specific build flags. Working on this appears to be an endless iterative trial-and-error journey where you hope each day that eventually you will see the <a href="/2021/06/08/qfieldcloud-now-opensource-happy-10-years-of-field-mapping-with-qgis/">QGIS splash screen on your Android phone</a> while all you see are endless lines of code and compiler errors.</p>
<p>As we know nowadays QGIS for Android has eventually seen the sunlight and its achievements are still the base for <a href="https://qfield.org/" target="_blank" rel="noopener">QGIS-based mobile apps like QField</a>.</p>
<p>Sometime later we decided to modernize the build infrastructure into OSGeo4A a set of scripts where each dependency was built with a &ldquo;recipe&rdquo;. Modularized this way, it was easier to maintain, and general build code common for all libraries could be isolated. It was good enough to help drive QField for a couple of years, and a copy of it is still in use <strong>as the base for nowadays <a href="https://github.com/qgis/QGIS-Mac-Packager/tree/master/qgis_deps" target="_blank" rel="noopener">QGIS builds for macOS</a></strong>.</p>
<p>When we decided to make QField also available on other platforms like <strong>iOS, Windows and macOS</strong> we quickly realized that duplicating build chains scales really bad and maintaining this is an immense effort we wanted to avoid. There are a couple of existing C++ dependency management systems, none of which convinced us ultimately. Lucky for us a mail on the <a href="https://www.mail-archive.com/qgis-developer@lists.osgeo.org/msg52302.html" target="_blank" rel="noopener">QGIS mailing list mentioned a new one called vcpkg</a> which looked very promising.</p>
<p>A couple of days later we had a build for Windows and later in the same year for macOS. With many dependencies already available in modern versions. Cheers.</p>
<p>What&rsquo;s left to do than just enable it for Android, and all our problems are suddenly solved? Alas, it&rsquo;s not so easy. <strong>Cross-compiling is always a bit trickier.</strong> And so we started another journey to improve the situation. After a while, we had a working build chain based on vcpkg for Android in our R&amp;D labs. Interestingly, this added a couple of features just because the community around vcpkg had already added them. For example using <a href="https://www.cogeo.org/" target="_blank" rel="noopener">COG</a>-based raster data via HTTP was suddenly working <em>(for the record: thanks to the availability of curl which we never took care of adding ourselves in OSGeo4A)</em>.</p>
<p>Soon after we also wanted to try building for <strong>iOS with vcpkg</strong>, which after a few attempts also was successful, and even managed to resolve some weird crashes and other issues we had experienced with the old buildchain.</p>














<figure class="figure text-center mb-4">
  
    <img src="/wp-content/uploads/2022/09/Peek-2022-09-19-17-01.gif" alt="" class="figure-img img-fluid gallery-img"
         
         
         >
  
  
</figure>
<p>The main benefit was that we could upgrade the QGIS base libraries in one single place for every platform, in an isolated branch without playing the Jenga game on each upgrade.</p>
<p>The only unfinished business we still had was that support for iOS and Android was still available only in our own vcpkg fork.</p>
<p>So the last few weeks and months <strong>we have been working closely with upstream</strong> to bring building for Android and iOS up to the same level as desktop platforms. The relevant parts are now in a clean state.</p>
<p>Advantages of this approach:</p>
<ul>
<li>• Mutualized efforts on all the base libraries, also with programmers outside the geoverse</li>
<li>• A vibrant community that ensures a noticeably fast upgrade of libraries</li>
<li>• A clean dependency management system</li>
<li>• A consistent set of dependency versions (gdal, geos, libpq, &hellip;) across all platforms</li>
<li>• A clean caching system that will only recompile reverse dependencies on updates</li>
<li>• We can upgrade a dependency in an isolated branch and only release it when it works on all platforms</li>
<li>• We can optimize the code for a given set of dependency versions and if a bug is fixed in a certain dependency version, we are sure we can ship this fix on all platforms promptly</li>
<li>• We maintain the QField source code as well as dependency versions in a single repository, what makes development more streamlined</li>
</ul>
<p>Big thanks go to Alexander Neumann and Kai Pastor who both stand out for doing things the right and future-proof way.</p>
<p>As always, things come at a price, there was a steep learning curve involved, and some edge cases require attention. However, we are thrilled by the simplification this has brought us.</p>
<p>If you are maintaining a customized fork of QField, it is now a good time to <strong>start upgrading to vcpkg</strong>, since <a href="https://github.com/opengisch/OSGeo4A" target="_blank" rel="noopener">OSGeo4A has been archived</a> and will no longer be maintained. The <a href="https://github.com/opengisch/QField/blob/master/doc/dev.md" target="_blank" rel="noopener">developer documentation of QField</a> has been updated with relevant instructions.</p>
<p>If you have time to test the new build system, <a href="https://github.com/opengisch/QField/discussions" target="_blank" rel="noopener">we will be happy to read about your experiences</a> with it.</p>

        </div>
    </div>
  </div>
</article>


<section class="py-5 border-top">
  <div class="container">
    <div class="row justify-content-center">
        
        
        
        <div class="mb-4">
          <h6 class="fw-bold mb-2">Tags:</h6>
          <div>
            
            <span class="badge bg-secondary me-2 mb-1">qgis.org</span>
            
          </div>
        </div>
        

        
        <div class="mb-4">
          <div class="row g-3">
            
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-body">
                  <h6 class="card-subtitle mb-2 text-muted">Previous Post</h6>
                  <a href="/2022/09/08/24th-contributors-qgis-meeting-in-firenze-2022/" class="card-title h6 text-decoration-none stretched-link">
                    <i class="fas fa-arrow-left me-2"></i>24th Contributors QGIS Meeting in Firenze 2022
                  </a>
                </div>
              </div>
            </div>
            
            
            
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-body text-end">
                  <h6 class="card-subtitle mb-2 text-muted">Next Post</h6>
                  <a href="/2022/10/13/qfield-2-4-is-here-and-it-is-%F0%9F%8D%8Ficious/" class="card-title h6 text-decoration-none stretched-link">
                    QField 2.4 is here, and it is ?icious<i class="fas fa-arrow-right ms-2"></i>
                  </a>
                </div>
              </div>
            </div>
            
          </div>
        </div>

        
        <div class="text-center">
          <a href="/blog/" class="btn btn-outline-primary">
            <i class="fas fa-arrow-left me-2"></i>Back to All Posts
          </a>
        </div>

    </div>
  </div>
</section>




<section class="py-5 bg-light">
  <div class="container">
    <h3 class="text-center mb-4">Related Posts</h3>
    <div class="row g-4">
      
      <div class="col-lg-4 col-md-6">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">
              <a href="/2022/09/08/24th-contributors-qgis-meeting-in-firenze-2022/" class="text-decoration-none stretched-link">24th Contributors QGIS Meeting in Firenze 2022</a>
            </h5>
            <p class="card-text">
              <small class="text-muted">
                <i class="fas fa-calendar me-1"></i>Sep 8, 2022
              </small>
            </p>
            
            <p class="card-text"><p>The international community of QGIS contributors got together in person from 18 to 22 August in …</p></p>
            
          </div>
        </div>
      </div>
      
      <div class="col-lg-4 col-md-6">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">
              <a href="/2022/08/16/a-new-trick-up-qfields-sleeve-animated-maps/" class="text-decoration-none stretched-link">A New Trick up QField’s Sleeve: Animated Maps</a>
            </h5>
            <p class="card-text">
              <small class="text-muted">
                <i class="fas fa-calendar me-1"></i>Aug 16, 2022
              </small>
            </p>
            
            <p class="card-text"><p><strong>Starting with QField 2.2, users can fully rely on animation capabilities that have made their way …</strong></p></p>
            
          </div>
        </div>
      </div>
      
      <div class="col-lg-4 col-md-6">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">
              <a href="/2022/03/05/qfield-users-sit-down-we-need-to-talk-about-storage-access-on-android%EF%BF%BC/" class="text-decoration-none stretched-link">QField Users Sit Down, We Need to Talk About Storage Access on Android</a>
            </h5>
            <p class="card-text">
              <small class="text-muted">
                <i class="fas fa-calendar me-1"></i>Mar 5, 2022
              </small>
            </p>
            
            <p class="card-text"><blockquote>
<p><em>TLDR: Since November 2021, Google has enforced new storage access limitations for apps published on …</em></p></blockquote></p>
            
          </div>
        </div>
      </div>
      
    </div>
  </div>
</section>



    </div>
    <footer class="site-footer mt-auto">
  
  <section id="about" class="py-5">
    <div class="container">
      <div class="page-header mb-4">
        <h2>About QField</h2>
      </div>
      <div class="row gy-4">

          
          <p >QField is the leading professional fieldwork app used in enterprise settings for efficient geospatial data collection and management.
As a Digital Public Good, QField not only excels in professional applications but also contributes significantly to advancing at least six of the <a href="/sdgs/">United Nations Sustainable Development Goals (SDGs)</a>, promoting a more sustainable and equitable future.</p>
          
        
          
          <div class="row">
              <h3>Stay in the loop</h3>
              <p><a href="https://www.opengis.ch/newsletter" target="_blank" rel="noopener">Subscribe to our newsletter</a> and stay up to date on the latest and greatest!</p>
          </div>
          
          <div class="row">
              <h3>Open-source</h3>
              <p>QField is <a href="https://github.com/opengisch/QField" target="_blank" rel="noopener">released</a> under the GNU Public License (GPL) version 2 or later.
Developing QField under this license means that you can inspect and modify the source code and guarantees that you will always have access to a QGIS based field data collection app that is free of cost and can be freely modified.</p>
          </div>
          
          <div class="row">
              <h3>Privacy</h3>
              <p>View the QField <a href="/privacy_policy.html">Privacy Policy</a> to learn what information is collected, how it is used, and how we protect it.</p>
          </div>
          
          <div class="row">
              <h3>Credits</h3>
              <p>QField, QFieldCloud and QFieldSync are developed by <a href="https://www.opengis.ch/" target="_blank" rel="noopener">OPENGIS.ch</a>.
OPENGIS.ch offers <a href="https://www.opengis.ch/training-consulting/" target="_blank" rel="noopener">consulting</a>, <a href="https://www.opengis.ch/custom-development/" target="_blank" rel="noopener">development</a>, <a href="https://www.opengis.ch/qfield-training/" target="_blank" rel="noopener">training</a> and <a href="https://www.opengis.ch/qgis-support/" target="_blank" rel="noopener">support</a> for open-source software including QField, QGIS and PostGIS.</p>
          </div>
          

      </div>
      
      <div class="social-links mt-4 text-center">
        
        <a href="https://fosstodon.org/@qfield" target="_blank" rel="noopener noreferrer">
          
          <img src="https://upload.wikimedia.org/wikipedia/commons/4/48/Mastodon_Logotype_%28Simple%29.svg" alt="Mastodon" width="32" height="32">
          
        </a>
        
        <a href="https://bsky.app/profile/qfield.org" target="_blank" rel="noopener noreferrer">
          
          <img src="https://upload.wikimedia.org/wikipedia/commons/7/7a/Bluesky_Logo.svg" alt="Bluesky" width="32" height="32">
          
        </a>
        
        <a href="https://www.linkedin.com/company/qfield" target="_blank" rel="noopener noreferrer">
          
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg" alt="LinkedIn" width="32" height="32">
          
        </a>
        
        <a href="https://github.com/opengisch/QField/" target="_blank" rel="noopener noreferrer">
          
          <img src="https://upload.wikimedia.org/wikipedia/commons/c/c2/GitHub_Invertocat_Logo.svg" alt="GitHub" width="32" height="32">
          
        </a>
        
      </div>
      
    </div>
  </section>
  

  <section class="footer-bottom border-top">
    <div class="container d-flex flex-column flex-lg-row align-items-center justify-content-between gap-3">
      <p class="mb-0 text-muted"></p>
      
    </div>
  </section>
</footer>

    




<script src="/js/bootstrap/bootstrap.bundle.min.6baf57f25796c332144ed58a2a0cd9ee.js?v=md5-a69X8leWwzIUTtWKKgzZ7g%3d%3d"></script>
  
    <script src="/js/main.6a92abbcb4a475fc4942d092d8b9076b.js?v=md5-apKrvLSkdfxJQtCS2LkHaw%3d%3d"></script>
  

<script src="/vendor/fontawesome/js/all.min.js" defer></script>



</body>
</html>
